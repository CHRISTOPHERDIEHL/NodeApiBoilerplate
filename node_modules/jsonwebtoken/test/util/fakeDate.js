var oldDate = global.Date;

/*
 * fix new Date() to a fixed unix timestamp.
 */
global.Date.fix = function (timestamp) ***REMOVED***
  var time = timestamp * 1000;

  if (global.Date.unfake) ***REMOVED***
    global.Date.unfake();
  ***REMOVED***

  global.Date = function (ts) ***REMOVED***
    return new oldDate(ts || time);
  ***REMOVED***;

  global.Date.prototype = Object.create(oldDate.prototype);
  global.Date.prototype.constructor = global.Date;

  global.Date.prototype.now = function () ***REMOVED***
    return time;
  ***REMOVED***;

  global.Date.now = function () ***REMOVED***
    return time;
  ***REMOVED***;

  global.Date.unfix = function () ***REMOVED***
    global.Date = oldDate;
  ***REMOVED***;

***REMOVED***;