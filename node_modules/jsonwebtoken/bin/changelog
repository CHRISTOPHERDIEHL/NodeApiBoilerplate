#!/usr/bin/env node

var changelog = require('conventional-changelog');
var semver_regex = /\bv?(?:0|[1-9][0-9]*)\.(?:0|[1-9][0-9]*)\.(?:0|[1-9][0-9]*)(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?\b/ig;

const commitPartial = ` - ***REMOVED******REMOVED***header***REMOVED******REMOVED***

***REMOVED******REMOVED***~!-- commit hash --***REMOVED******REMOVED*** ***REMOVED******REMOVED***#if @root.linkReferences***REMOVED******REMOVED***([***REMOVED******REMOVED***hash***REMOVED******REMOVED***](***REMOVED******REMOVED***#if @root.host***REMOVED******REMOVED******REMOVED******REMOVED***@root.host***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***#if @root.owner***REMOVED******REMOVED******REMOVED******REMOVED***@root.owner***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***@root.repository***REMOVED******REMOVED***/***REMOVED******REMOVED***@root.commit***REMOVED******REMOVED***/***REMOVED******REMOVED***hash***REMOVED******REMOVED***))***REMOVED******REMOVED***else***REMOVED******REMOVED******REMOVED******REMOVED***hash~***REMOVED******REMOVED******REMOVED******REMOVED***/if***REMOVED******REMOVED***

***REMOVED******REMOVED***~!-- commit references --***REMOVED******REMOVED******REMOVED******REMOVED***#if references***REMOVED******REMOVED***, closes***REMOVED******REMOVED***~#each references***REMOVED******REMOVED*** ***REMOVED******REMOVED***#if @root.linkReferences***REMOVED******REMOVED***[***REMOVED******REMOVED***#if this.owner***REMOVED******REMOVED******REMOVED******REMOVED***this.owner***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***this.repository***REMOVED******REMOVED***#***REMOVED******REMOVED***this.issue***REMOVED******REMOVED***](***REMOVED******REMOVED***#if @root.host***REMOVED******REMOVED******REMOVED******REMOVED***@root.host***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***#if this.repository***REMOVED******REMOVED******REMOVED******REMOVED***#if this.owner***REMOVED******REMOVED******REMOVED******REMOVED***this.owner***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***this.repository***REMOVED******REMOVED******REMOVED******REMOVED***else***REMOVED******REMOVED******REMOVED******REMOVED***#if @root.owner***REMOVED******REMOVED******REMOVED******REMOVED***@root.owner***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***@root.repository***REMOVED******REMOVED******REMOVED******REMOVED***/if***REMOVED******REMOVED***/***REMOVED******REMOVED***@root.issue***REMOVED******REMOVED***/***REMOVED******REMOVED***this.issue***REMOVED******REMOVED***)***REMOVED******REMOVED***else***REMOVED******REMOVED******REMOVED******REMOVED***#if this.owner***REMOVED******REMOVED******REMOVED******REMOVED***this.owner***REMOVED******REMOVED***/***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***this.repository***REMOVED******REMOVED***#***REMOVED******REMOVED***this.issue***REMOVED******REMOVED******REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***/each***REMOVED******REMOVED******REMOVED******REMOVED***/if***REMOVED******REMOVED***
`;

const headerPartial = `## ***REMOVED******REMOVED***version***REMOVED******REMOVED******REMOVED******REMOVED***#if title***REMOVED******REMOVED*** "***REMOVED******REMOVED***title***REMOVED******REMOVED***"***REMOVED******REMOVED***/if***REMOVED******REMOVED******REMOVED******REMOVED***#if date***REMOVED******REMOVED*** - ***REMOVED******REMOVED***date***REMOVED******REMOVED******REMOVED******REMOVED***/if***REMOVED******REMOVED***
`;

changelog(***REMOVED***
  releaseCount: 19,
  // preset: 'jshint'
***REMOVED***, null, null, null, ***REMOVED***
  transform: function (commit) ***REMOVED***
    if (commit.header && semver_regex.exec(commit.header)) ***REMOVED***
      return null;
    ***REMOVED***
    return commit;
  ***REMOVED***,
  commitPartial: commitPartial,
  headerPartial: headerPartial
***REMOVED***).pipe(process.stdout);
