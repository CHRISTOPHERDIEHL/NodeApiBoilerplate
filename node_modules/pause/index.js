
module.exports = function(obj)***REMOVED***
  var onData
    , onEnd
    , events = [];

  // buffer data
  obj.on('data', onData = function(data, encoding)***REMOVED***
    events.push(['data', data, encoding]);
  ***REMOVED***);

  // buffer end
  obj.on('end', onEnd = function(data, encoding)***REMOVED***
    events.push(['end', data, encoding]);
  ***REMOVED***);

  return ***REMOVED***
    end: function()***REMOVED***
      obj.removeListener('data', onData);
      obj.removeListener('end', onEnd);
    ***REMOVED***,
    resume: function()***REMOVED***
      this.end();
      for (var i = 0, len = events.length; i < len; ++i) ***REMOVED***
        obj.emit.apply(obj, events[i]);
      ***REMOVED***
    ***REMOVED***
  ***REMOVED***;
***REMOVED***;