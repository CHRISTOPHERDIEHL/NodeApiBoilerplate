"use strict"

var ReadPreference = require('../topologies/read_preference'),
  MongoError = require('../error');

var getReadPreference = function(cmd, options) ***REMOVED***
  // Default to command version of the readPreference
  var readPreference = cmd.readPreference || new ReadPreference('primary');
  // If we have an option readPreference override the command one
  if(options.readPreference) ***REMOVED***
    readPreference = options.readPreference;
  ***REMOVED***

  if(typeof readPreference == 'string') ***REMOVED***
    readPreference = new ReadPreference(readPreference);
  ***REMOVED***

  if(!(readPreference instanceof ReadPreference)) ***REMOVED***
    throw new MongoError('readPreference must be a ReadPreference instance');
  ***REMOVED***

  return readPreference;
***REMOVED***

module.exports = ***REMOVED***
  getReadPreference: getReadPreference
***REMOVED***
