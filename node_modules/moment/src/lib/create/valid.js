import extend from '../utils/extend';
import ***REMOVED*** createUTC ***REMOVED*** from './utc';
import getParsingFlags from '../create/parsing-flags';
import some from '../utils/some';

export function isValid(m) ***REMOVED***
    if (m._isValid == null) ***REMOVED***
        var flags = getParsingFlags(m);
        var parsedParts = some.call(flags.parsedDateParts, function (i) ***REMOVED***
            return i != null;
        ***REMOVED***);
        var isNowValid = !isNaN(m._d.getTime()) &&
            flags.overflow < 0 &&
            !flags.empty &&
            !flags.invalidMonth &&
            !flags.invalidWeekday &&
            !flags.nullInput &&
            !flags.invalidFormat &&
            !flags.userInvalidated &&
            (!flags.meridiem || (flags.meridiem && parsedParts));

        if (m._strict) ***REMOVED***
            isNowValid = isNowValid &&
                flags.charsLeftOver === 0 &&
                flags.unusedTokens.length === 0 &&
                flags.bigHour === undefined;
        ***REMOVED***

        if (Object.isFrozen == null || !Object.isFrozen(m)) ***REMOVED***
            m._isValid = isNowValid;
        ***REMOVED***
        else ***REMOVED***
            return isNowValid;
        ***REMOVED***
    ***REMOVED***
    return m._isValid;
***REMOVED***

export function createInvalid (flags) ***REMOVED***
    var m = createUTC(NaN);
    if (flags != null) ***REMOVED***
        extend(getParsingFlags(m), flags);
    ***REMOVED***
    else ***REMOVED***
        getParsingFlags(m).userInvalidated = true;
    ***REMOVED***

    return m;
***REMOVED***
