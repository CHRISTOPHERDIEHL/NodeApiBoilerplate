import ***REMOVED*** get, set ***REMOVED*** from './get-set';
import ***REMOVED*** setMonth ***REMOVED*** from '../units/month';
import ***REMOVED*** createDuration ***REMOVED*** from '../duration/create';
import ***REMOVED*** deprecateSimple ***REMOVED*** from '../utils/deprecate';
import ***REMOVED*** hooks ***REMOVED*** from '../utils/hooks';
import absRound from '../utils/abs-round';


// TODO: remove 'name' arg after deprecation is removed
function createAdder(direction, name) ***REMOVED***
    return function (val, period) ***REMOVED***
        var dur, tmp;
        //invert the arguments, but complain about it
        if (period !== null && !isNaN(+period)) ***REMOVED***
            deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +
            'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');
            tmp = val; val = period; period = tmp;
        ***REMOVED***

        val = typeof val === 'string' ? +val : val;
        dur = createDuration(val, period);
        addSubtract(this, dur, direction);
        return this;
    ***REMOVED***;
***REMOVED***

export function addSubtract (mom, duration, isAdding, updateOffset) ***REMOVED***
    var milliseconds = duration._milliseconds,
        days = absRound(duration._days),
        months = absRound(duration._months);

    if (!mom.isValid()) ***REMOVED***
        // No op
        return;
    ***REMOVED***

    updateOffset = updateOffset == null ? true : updateOffset;

    if (milliseconds) ***REMOVED***
        mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
    ***REMOVED***
    if (days) ***REMOVED***
        set(mom, 'Date', get(mom, 'Date') + days * isAdding);
    ***REMOVED***
    if (months) ***REMOVED***
        setMonth(mom, get(mom, 'Month') + months * isAdding);
    ***REMOVED***
    if (updateOffset) ***REMOVED***
        hooks.updateOffset(mom, days || months);
    ***REMOVED***
***REMOVED***

export var add      = createAdder(1, 'add');
export var subtract = createAdder(-1, 'subtract');

