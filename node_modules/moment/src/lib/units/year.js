import ***REMOVED*** makeGetSet ***REMOVED*** from '../moment/get-set';
import ***REMOVED*** addFormatToken ***REMOVED*** from '../format/format';
import ***REMOVED*** addUnitAlias ***REMOVED*** from './aliases';
import ***REMOVED*** addUnitPriority ***REMOVED*** from './priorities';
import ***REMOVED*** addRegexToken, match1to2, match1to4, match1to6, match2, match4, match6, matchSigned ***REMOVED*** from '../parse/regex';
import ***REMOVED*** addParseToken ***REMOVED*** from '../parse/token';
import ***REMOVED*** hooks ***REMOVED*** from '../utils/hooks';
import ***REMOVED*** YEAR ***REMOVED*** from './constants';
import toInt from '../utils/to-int';

// FORMATTING

addFormatToken('Y', 0, 0, function () ***REMOVED***
    var y = this.year();
    return y <= 9999 ? '' + y : '+' + y;
***REMOVED***);

addFormatToken(0, ['YY', 2], 0, function () ***REMOVED***
    return this.year() % 100;
***REMOVED***);

addFormatToken(0, ['YYYY',   4],       0, 'year');
addFormatToken(0, ['YYYYY',  5],       0, 'year');
addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

// ALIASES

addUnitAlias('year', 'y');

// PRIORITIES

addUnitPriority('year', 1);

// PARSING

addRegexToken('Y',      matchSigned);
addRegexToken('YY',     match1to2, match2);
addRegexToken('YYYY',   match1to4, match4);
addRegexToken('YYYYY',  match1to6, match6);
addRegexToken('YYYYYY', match1to6, match6);

addParseToken(['YYYYY', 'YYYYYY'], YEAR);
addParseToken('YYYY', function (input, array) ***REMOVED***
    array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);
***REMOVED***);
addParseToken('YY', function (input, array) ***REMOVED***
    array[YEAR] = hooks.parseTwoDigitYear(input);
***REMOVED***);
addParseToken('Y', function (input, array) ***REMOVED***
    array[YEAR] = parseInt(input, 10);
***REMOVED***);

// HELPERS

export function daysInYear(year) ***REMOVED***
    return isLeapYear(year) ? 366 : 365;
***REMOVED***

function isLeapYear(year) ***REMOVED***
    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
***REMOVED***

// HOOKS

hooks.parseTwoDigitYear = function (input) ***REMOVED***
    return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
***REMOVED***;

// MOMENTS

export var getSetYear = makeGetSet('FullYear', true);

export function getIsLeapYear () ***REMOVED***
    return isLeapYear(this.year());
***REMOVED***
